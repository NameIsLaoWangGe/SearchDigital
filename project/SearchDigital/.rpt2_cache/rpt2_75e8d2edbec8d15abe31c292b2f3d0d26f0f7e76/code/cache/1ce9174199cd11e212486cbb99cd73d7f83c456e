{
  "code": "export default class GameOver extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['GameOVer'] = this;\r\n        this.gameControl = this.self.scene['Gamecontrol'];\r\n        this.levelsNode = this.gameControl.levelsNode;\r\n        this.indicateCard = this.gameControl.indicateCard;\r\n        this.timeCard = this.gameControl.timeCard;\r\n        this.line = this.gameControl.line;\r\n        this.logoSwitch = false;\r\n        this.logoChange = 'appear';\r\n        this.gameControl.adaptiveOther(this.self);\r\n        this.appaer();\r\n        this.gameControl.wxPostData();\r\n    }\r\n    appaer() {\r\n        let firstY = 1800;\r\n        this.logo.y = firstY;\r\n        this.logo.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_again.y = firstY;\r\n        this.btn_again.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_return.y = firstY;\r\n        this.btn_return.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.commonAppear(this.logo, 0, 644);\r\n        this.commonAppear(this.btn_again, 1, 790);\r\n        this.commonAppear(this.btn_return, 2, 790);\r\n    }\r\n    commonAppear(node, number, targetY) {\r\n        let time = 500;\r\n        let delayed = 150;\r\n        Laya.Tween.to(node, { y: targetY, rotation: 0 }, time, null, Laya.Handler.create(this, function () {\r\n            if (number === 0) {\r\n                this.levelsGameOver();\r\n            }\r\n        }), number * delayed);\r\n    }\r\n    levelsGameOver() {\r\n        let time = 200;\r\n        let targetX = Laya.stage.width / 2;\r\n        let targetY = this.logo.y + (this.self.y - this.self.height / 2) - 150;\r\n        let Pre = 1 / 2;\r\n        Laya.Tween.to(this.levelsNode, { x: targetX * Pre, y: targetY * Pre, rotation: 45 }, time, null, Laya.Handler.create(this, function () {\r\n            Laya.Tween.to(this.levelsNode, { x: targetX, y: targetY, rotation: 0, }, time, null, Laya.Handler.create(this, function () {\r\n                this.logoSwitch = true;\r\n            }), 0);\r\n        }), 30);\r\n        this.levelsNode['LevelsNode'].levelsNodeAni('common', 100);\r\n        Laya.Tween.to(this.indicateCard, { alpha: 0 }, time * 2, null, Laya.Handler.create(this, function () {\r\n            this.clicksOnBtn();\r\n        }), 60);\r\n        Laya.Tween.to(this.timeCard, { alpha: 0 }, time * 2, null, Laya.Handler.create(this, function () {\r\n        }), 30);\r\n        Laya.Tween.to(this.line, { alpha: 0 }, time, null, Laya.Handler.create(this, function () {\r\n        }), 0);\r\n    }\r\n    homing(type) {\r\n        let time = 250;\r\n        let targetX = 108;\r\n        let targetY = this.indicateCard.y;\r\n        let Pre = 1 / 2;\r\n        Laya.Tween.to(this.levelsNode, { x: this.levelsNode.x - targetX - 20, y: this.levelsNode.y - targetY, rotation: -45 }, time, null, Laya.Handler.create(this, function () {\r\n            Laya.Tween.to(this.levelsNode, { x: targetX, y: targetY, rotation: 0 }, time, null, Laya.Handler.create(this, function () {\r\n            }), 0);\r\n        }), 0);\r\n        this.levelsNode['LevelsNode'].levelsNodeAni('common', 100);\r\n        Laya.Tween.to(this.indicateCard, { alpha: 1 }, time * 2, null, Laya.Handler.create(this, function () {\r\n        }), 100);\r\n        Laya.Tween.to(this.timeCard, { alpha: 1 }, time * 2, null, Laya.Handler.create(this, function () {\r\n        }), 200);\r\n        Laya.Tween.to(this.line, { alpha: 1 }, time, null, Laya.Handler.create(this, function () {\r\n            if (type === 'again') {\r\n                this.gameControl.replacementCard('reStart');\r\n            }\r\n            else if (type === 'return') {\r\n                this.gameControl.createStartGame();\r\n                this.gameControl.otherVanish();\r\n            }\r\n        }), 500);\r\n    }\r\n    vanish(type) {\r\n        let Lrotation = Math.floor(Math.random() * 2) === 1 ? 30 : -30;\r\n        let Arotation = Math.floor(Math.random() * 2) === 1 ? 30 : -30;\r\n        let Rrotation = Math.floor(Math.random() * 2) === 1 ? 30 : -30;\r\n        this.commonVanish(this.btn_again, 0, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        this.commonVanish(this.btn_return, 1, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        let time = 800;\r\n        let targetY = 1800;\r\n        Laya.Tween.to(this.logo, { y: targetY, rotation: Rrotation }, time, Laya.Ease.expoIn, Laya.Handler.create(this, function () {\r\n            if (Laya.Browser.onMiniGame) {\r\n                this.gameControl.bannerAd.hide();\r\n            }\r\n            this.self.removeSelf();\r\n            this.homing(type);\r\n        }), 300);\r\n    }\r\n    commonVanish(node, number, rotation) {\r\n        let time = 800;\r\n        let delayed = 150;\r\n        Laya.Tween.to(node, { y: 1800, rotation: rotation }, time, Laya.Ease.expoIn, Laya.Handler.create(this, function () {\r\n        }), 0);\r\n    }\r\n    clicksOnBtn() {\r\n        this.btn_again.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_again.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_again.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_again.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_return.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_return.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_return.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_return.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n    }\r\n    clicksOffBtn() {\r\n        this.btn_again.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_again.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_again.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_again.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_return.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_return.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_return.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_return.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n    }\r\n    down(event) {\r\n        event.currentTarget.scale(1.1, 1.1);\r\n    }\r\n    move(event) {\r\n        event.currentTarget.scale(1, 1);\r\n    }\r\n    up(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        this.clicksOffBtn();\r\n        if (event.currentTarget.name === 'btn_again') {\r\n            this.vanish('again');\r\n        }\r\n        else if (event.currentTarget.name === 'btn_return') {\r\n            this.vanish('return');\r\n        }\r\n    }\r\n    out(event) {\r\n        event.currentTarget.scale(1, 1);\r\n    }\r\n    onUpdate() {\r\n        if (this.logoSwitch) {\r\n            if (this.logoChange === 'appear') {\r\n                this.logo.alpha -= 0.01;\r\n                if (this.logo.alpha < 0.3) {\r\n                    this.logoChange = 'vanish';\r\n                }\r\n            }\r\n            else if (this.logoChange === 'vanish') {\r\n                this.logo.alpha += 0.01;\r\n                if (this.logo.alpha >= 1) {\r\n                    this.logoChange = 'appear';\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": []
}
