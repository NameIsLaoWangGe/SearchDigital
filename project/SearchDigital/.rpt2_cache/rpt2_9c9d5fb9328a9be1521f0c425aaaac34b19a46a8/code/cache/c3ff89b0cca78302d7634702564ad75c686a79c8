{
  "code": "export default class StartGame extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['GameOVer'] = this;\r\n        this.gameControl = this.self.scene['Gamecontrol'];\r\n        this.levelsNode = this.gameControl.levelsNode;\r\n        this.indicateCard = this.gameControl.indicateCard;\r\n        this.timeCard = this.gameControl.timeCard;\r\n        this.line = this.gameControl.line;\r\n        this.gameControl.startNode = this.self;\r\n        this.startSwitch = false;\r\n        this.startChange = 'appear';\r\n        this.watchAds = false;\r\n        this.gameControl.adaptiveOther(this.self);\r\n        this.videoAd = this.gameControl.videoAd;\r\n        this.appaer();\r\n    }\r\n    appaer() {\r\n        let firstY = 1800;\r\n        this.logo.y = firstY;\r\n        this.logo.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_start.y = firstY;\r\n        this.btn_start.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_adv.y = firstY;\r\n        this.btn_adv.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_ranking.y = firstY;\r\n        this.btn_ranking.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.btn_share.y = firstY;\r\n        this.btn_share.rotation = Math.floor(Math.random() * 2) === 1 ? 45 : -45;\r\n        this.gameControl.childAdaptive(this.anti_addiction, this.self, Laya.stage.height * 9 / 10);\r\n        this.anti_addiction.alpha = 0;\r\n        this.commonAppear(this.logo, 0, 416);\r\n        this.commonAppear(this.btn_start, 1, 565);\r\n        this.commonAppear(this.btn_adv, 2, 667);\r\n        this.commonAppear(this.btn_ranking, 3, 877);\r\n        this.commonAppear(this.btn_share, 4, 877);\r\n        Laya.Tween.to(this.anti_addiction, { alpha: 1 }, 1000, null, Laya.Handler.create(this, function () {\r\n        }));\r\n    }\r\n    commonAppear(node, number, targetY) {\r\n        let delayed = 80;\r\n        let time = 600;\r\n        Laya.Tween.to(node, { y: targetY, rotation: 0 }, time, null, Laya.Handler.create(this, function () {\r\n            if (number === 4) {\r\n                this.startSwitch = true;\r\n                this.clicksOnBtn();\r\n                if (Laya.Browser.onMiniGame) {\r\n                    this.gameControl.bannerAd.show()\r\n                        .then(() => console.log('banner 广告显示'));\r\n                }\r\n            }\r\n        }), number * delayed);\r\n    }\r\n    startVanish(type) {\r\n        Laya.Tween.to(this.anti_addiction, { alpha: 0 }, 300, null, Laya.Handler.create(this, function () {\r\n        }));\r\n        this.commonVanish(this.logo, 0, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        this.commonVanish(this.btn_start, 1, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        this.commonVanish(this.btn_adv, 2, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        this.commonVanish(this.btn_ranking, 3, Math.floor(Math.random() * 2) === 1 ? 30 : -30);\r\n        let time = 600;\r\n        let delayed = 150;\r\n        Laya.Tween.to(this.btn_share, { y: 1800, rotation: Math.floor(Math.random() * 2) === 1 ? 30 : -30 }, time, Laya.Ease.expoIn, Laya.Handler.create(this, function () {\r\n            this.self.removeSelf();\r\n            this.gameControl.otherAppear();\r\n            this.gameControl.replacementCard(type);\r\n        }), 4 * 150);\r\n    }\r\n    commonVanish(node, number, rotation) {\r\n        let time = 600;\r\n        let delayed = 150;\r\n        Laya.Tween.to(node, { y: 1800, rotation: rotation }, time, Laya.Ease.expoIn, Laya.Handler.create(this, function () {\r\n            if (number === 4) {\r\n                this.self.removeSelf();\r\n                this.gameControl.otherAppear();\r\n                if (this.watchAds) {\r\n                    this.gameControl.replacementCard('adv');\r\n                }\r\n                else {\r\n                    this.gameControl.replacementCard('start');\r\n                }\r\n            }\r\n        }), number * delayed);\r\n    }\r\n    clicksOnBtn() {\r\n        this.btn_start.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_start.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_start.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_start.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_adv.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_adv.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_adv.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_adv.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_ranking.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_ranking.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_ranking.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_ranking.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_share.on(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_share.on(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_share.on(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_share.on(Laya.Event.MOUSE_OUT, this, this.out);\r\n    }\r\n    clicksOffBtn() {\r\n        this.btn_start.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_start.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_start.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_start.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_adv.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_adv.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_adv.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_adv.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_ranking.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_ranking.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_ranking.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_ranking.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n        this.btn_share.off(Laya.Event.MOUSE_DOWN, this, this.down);\r\n        this.btn_share.off(Laya.Event.MOUSE_MOVE, this, this.move);\r\n        this.btn_share.off(Laya.Event.MOUSE_UP, this, this.up);\r\n        this.btn_share.off(Laya.Event.MOUSE_OUT, this, this.out);\r\n    }\r\n    down(event) {\r\n        event.currentTarget.scale(1.1, 1.1);\r\n    }\r\n    move(event) {\r\n        event.currentTarget.scale(1, 1);\r\n    }\r\n    up(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        if (event.currentTarget.name === 'btn_start') {\r\n            if (Laya.Browser.onMiniGame) {\r\n                this.gameControl.bannerAd.hide();\r\n            }\r\n            this.startVanish('start');\r\n            this.clicksOffBtn();\r\n        }\r\n        else if (event.currentTarget.name === 'btn_adv') {\r\n            if (Laya.Browser.onMiniGame) {\r\n                this.gameControl.bannerAd.hide();\r\n            }\r\n            this.videoAd.show().catch(() => {\r\n                this.videoAd.load()\r\n                    .then(() => this.videoAd.show())\r\n                    .catch(err => {\r\n                    console.log('激励视频 广告显示失败');\r\n                });\r\n            });\r\n        }\r\n        else if (event.currentTarget.name === 'btn_ranking') {\r\n            this.gameControl.createRanking();\r\n        }\r\n        else if (event.currentTarget.name === 'btn_share') {\r\n            if (Laya.Browser.onMiniGame) {\r\n                this.gameControl.bannerAd.show();\r\n            }\r\n        }\r\n    }\r\n    out(event) {\r\n        event.currentTarget.scale(1, 1);\r\n    }\r\n    onUpdate() {\r\n        if (this.startSwitch) {\r\n            if (this.startChange === 'appear') {\r\n                this.btn_start.scaleX += 0.003;\r\n                this.btn_start.scaleY += 0.003;\r\n                this.btn_adv.scaleX -= 0.003;\r\n                this.btn_adv.scaleY -= 0.003;\r\n                if (this.btn_start.scaleX > 1.1) {\r\n                    this.startChange = 'vanish';\r\n                }\r\n            }\r\n            else if (this.startChange === 'vanish') {\r\n                this.btn_start.scaleX -= 0.003;\r\n                this.btn_start.scaleY -= 0.003;\r\n                this.btn_adv.scaleX += 0.003;\r\n                this.btn_adv.scaleY += 0.003;\r\n                if (this.btn_start.scaleX < 1) {\r\n                    this.startChange = 'appear';\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": []
}
