!function(){"use strict";var Animation,PalyAudio,Clicks;!function(Animation){Animation.upDown_Rotate=function(node,time,func){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)}),0)}),0)},Animation.leftRight_Rotate=function(node,time,func){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){}),0),null!==func&&func()}),0)}),0)}),0)},Animation.leftRight_Shake=function(node,time,range,func){Laya.Tween.to(node,{x:node.x-range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:node.x+2*range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:node.x-range},time,null,Laya.Handler.create(this,function(){null!==func&&func()}))}))}))},Animation.upDwon_Shake=function(node,time,range,func){Laya.Tween.to(node,{y:node.y+range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{y:node.y-2*range},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{y:node.y+range},time,null,Laya.Handler.create(this,function(){null!==func&&func()}))}))}))},Animation.fade_out=function(node,alhpa1,alhpa2,time,delayed,func){node.alpha=alhpa1,Laya.Tween.to(node,{alpha:alhpa2},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.fade_out_Move=function(node,time,range,x,y,delayed,func){Laya.Tween.to(node,{alpha:range,x:x,y:y},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.drop=function(node,targetY,rotation,time,delayed,func){Laya.Tween.to(node,{y:targetY,rotation:rotation},time,Laya.Ease.expoIn,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.go_up=function(node,initialY,initialR,targetY,time,delayed,func){node.y=initialY,node.rotation=initialR,Laya.Tween.to(node,{y:targetY,rotation:0},time,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){null!==func&&func()}),delayed)},Animation.cardRotateX_TowFace=function(node,arr,func1,time,delayed,func2){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=0)}null!==func1&&func1(),Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleX:1},1*time/2,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=1)}null!==func2&&func2()}),0)}),0)}),0)}),delayed)},Animation.cardRotateX_OneFace=function(node,func1,time,delayed,func2){Laya.Tween.to(node,{scaleX:0},time,null,Laya.Handler.create(this,function(){null!==func1&&func1(),Laya.Tween.to(node,{scaleX:1},time,null,Laya.Handler.create(this,function(){null!==func2&&func2()}),0)}),delayed)},Animation.cardRotateY_TowFace=function(node,arr,func1,time,delayed,func2){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=0)}null!==func1&&func1(),Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{scaleY:1},1*time/2,null,Laya.Handler.create(this,function(){for(let i=0;i<arr.length;i++){let child=node.getChildByName(arr[i]);null!==child&&(child.alpha=1)}null!==func2&&func2()}),0)}),0)}),0)}),delayed)},Animation.cardRotateY_OneFace=function(node,func1,time,delayed,func2){Laya.Tween.to(node,{scaleY:0},time,null,Laya.Handler.create(this,function(){null!==func1&&func1(),Laya.Tween.to(node,{scaleY:1},time,null,Laya.Handler.create(this,function(){null!==func2&&func2()}),0)}),delayed)},Animation.move_changeRotate=function(node,targetX,targetY,per,rotation_pe,time,func){let targetPerX=targetX*per+node.x*(1-per),targetPerY=targetY*per+node.y*(1-per);Laya.Tween.to(node,{x:targetPerX,y:targetPerY,rotation:45},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(node,{x:targetX,y:targetY,rotation:0},time,null,Laya.Handler.create(this,function(){null!==func&&func()}),0)}),0)}}(Animation||(Animation={})),function(PalyAudio){PalyAudio.aAingleCard=function(number){Laya.SoundManager.playSound("音效/单张发牌.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.groupUp=function(number){Laya.SoundManager.playSound("音效/连续发牌.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.groupDrop=function(number){Laya.SoundManager.playSound("音效/全体下落.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.cardRotate=function(number){Laya.SoundManager.playSound("音效/单张牌旋转.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.gameOver=function(number){Laya.SoundManager.playSound("音效/结束.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.clickRight=function(number){Laya.SoundManager.playSound("音效/点击正确.mp3",number,Laya.Handler.create(this,function(){}))},PalyAudio.clickError=function(number){Laya.SoundManager.playSound("音效/点击错误.mp3",number,Laya.Handler.create(this,function(){}))}}(PalyAudio||(PalyAudio={}));class GameControl extends Laya.Script{constructor(){super()}onEnable(){this.initGameScene(),this.adaptiveRule(),Laya.loader.create("音效/单张发牌.mp3",Laya.Handler.create(this,function(){this.createStartGame()}))}initGameScene(){this.self=this.owner,this.self.Gamecontrol=this,this.levels=0,this.levelsNum.value=this.levels.toString(),this.timer=0,this.timeNum.value="30s",this.timerSwitch=!1,this.videoAdOnClose=!1,this.startFirstAudio=0,this.videoAdLode(),this.bannerAdLode(),this.wxPostInit()}videoAdLode(){Laya.Browser.onMiniGame&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-6de18c6de7b6d9ab"}),this.videoAd.onLoad(()=>{console.log("激励视频 广告加载成功")}),this.videoAd.onError(err=>{console.log(err)}),this.videoAd.onClose(res=>{res&&res.isEnded||void 0===res?(this.startNode.GameOVer.vanish("adv"),Laya.Browser.onMiniGame&&this.bannerAd.hide()):(Laya.Browser.onMiniGame&&this.bannerAd.show().then(()=>console.log("banner 广告显示")),console.log("视频没有看望不会开始游戏"))}))}bannerAdLode(){Laya.Browser.onMiniGame&&(this.bannerAd=wx.createBannerAd({adUnitId:"adunit-5329937f4349b0ea",adIntervals:30,style:{left:0,top:0,width:750}}),this.bannerAd.onLoad(()=>{console.log("banner 广告加载成功")}),this.bannerAd.onError(err=>{console.log(err)}),this.bannerAd.show())}adaptiveRule(){let stageHeight=Laya.stage.height;this.self.height=stageHeight,this.background.height=stageHeight,this.background.x=0,this.background.y=0;let location=.132*stageHeight;this.levelsNode.y=location,this.levelsNode.alpha=0,this.indicateCard.y=location,this.indicateCard.alpha=0,this.timeCard.y=location,this.timeCard.alpha=0,this.cardParent.y=.22*stageHeight,this.line.y=(this.cardParent.y+this.indicateCard.y+this.indicateCard.height/2+7)/2,this.line.alpha=0,this.cardAndParentAdaptive()}createStartGame(){let startGame=Laya.Pool.getItemByCreateFun("startGame",this.startGame.create,this.startGame);this.self.addChild(startGame)}replacementCard(type){"start"===type||"reStart"===type||"adv"===type?this.levels=1:"nextLevel"===type&&this.levels++,this.timer=-50,this.otherRotate(type)}otherRotate(type){Animation.cardRotateX_OneFace(this.levelsNode,func=>{this.levelsNum.value=this.levels.toString(),PalyAudio.cardRotate(1)},120,0,func=>{Animation.cardRotateY_OneFace(this.indicateCard,func=>this.indicateNumReset(),120,0,func=>{PalyAudio.cardRotate(1),this.otherRotateFunc(type,120)})})}otherRotateFunc(type,time){"nextLevel"===type?this.cardCollection():Animation.cardRotateX_OneFace(this.timeCard,func=>{PalyAudio.cardRotate(1),"start"===type||"reStart"===type?this.timeNum.value="30s":"adv"===type&&(this.timeNum.value="40s")},time,0,func=>this.cardCollection())}indicateNumReset(){let num1=Math.floor(9*Math.random())+1,levels=this.levels,overlen=levels-1,num=num1.toString();for(let i=0;i<overlen;i++)num+=Math.floor(10*Math.random()).toString();let scale=1-.04*(levels-2);this.indicateNum.scale(scale,scale),this.indicateNum.value=num,this.changeAnumber()}otherVanish(){Animation.fade_out(this.levelsNode,1,0,200,0,null),Animation.fade_out(this.indicateCard,1,0,200,150,null),Animation.fade_out(this.timeCard,1,0,200,300,null),Animation.fade_out(this.line,1,0,200,450,null)}otherAppear(){Animation.fade_out(this.levelsNode,0,1,200,0,null),Animation.fade_out(this.indicateCard,0,1,200,150,null),Animation.fade_out(this.timeCard,0,1,200,300,null),Animation.fade_out(this.line,0,1,200,450,null)}cardAndParentAdaptive(){this.cardSpacingY=10;let cardSpace=(this.self.height-this.cardParent.y-.05*this.self.height)/7;this.cardHeight=cardSpace-this.cardSpacingY}cardCollection(){let startX1=this.cardParent.width/4,startX2=3*this.cardParent.width/4,noChengeJ=Math.floor(14*Math.random()),delayed=10;for(let j=13;j>=0;j--){let card,tagetY;(card=j===noChengeJ?this.createCard("nochange"):this.createCard("change")).y=1500,card.zOrder=Math.floor(30*Math.random()),card.height=this.cardHeight,card.DigitalCard.board.height=this.cardHeight,card.DigitalCard.number.y=this.cardHeight/2,j%2==0?(card.x=startX1,tagetY=j/2*(card.height+this.cardSpacingY)+80):(card.x=startX2,tagetY=(j-1)/2*(card.height+this.cardSpacingY)+80),0===j&&PalyAudio.groupUp(1),Animation.go_up(card,1800,1===Math.floor(2*Math.random())?30:-30,tagetY,500,delayed,func=>{if(13===j){this.timerSwitch=!0;for(let index=0;index<this.cardParent._children.length;index++){this.cardParent._children[index].DigitalCard.cardClicksOn()}}}),delayed+=50}}clearAllCard_Next(){this.clearAllClicks();let len=this.cardParent._children.length;this.timerSwitch=!1;for(let i=0;i<len;i++){let card=this.cardParent._children[i];Laya.timer.once(50*i,this,function(){Animation.drop(card,1800,1===Math.floor(2*Math.random())?30:-30,800,0,func=>{1===i&&PalyAudio.groupDrop(1),i===len-1&&(this.cardParent.removeChildren(0,len-1),this.replacementCard("nextLevel"))})})}}clearAllCard_Over(){this.clearAllClicks();let len=this.cardParent._children.length;this.timerSwitch=!1;for(let i=0;i<len;i++){let card=this.cardParent._children[i];Laya.timer.once(50*i,this,func=>{1===i&&PalyAudio.groupDrop(1),card.DigitalCard.number.value===this.indicateNum.value?(card.zOrder=1e3,this.cardRotating(card,i)):Animation.drop(card,1800,1===Math.floor(2*Math.random())?30:-30,800,0,null)})}}cardRotating(card,i){let len=this.cardParent._children.length;Animation.cardRotateY_TowFace(card,["number"],func=>{PalyAudio.cardRotate(2)},120,50*(len-i)+500,func=>{Animation.drop(card,1800,1===Math.floor(2*Math.random())?30:-30,1e3,500,func=>{this.cardParent.removeChildren(0,len-1),this.createGameOver()})})}clearAllClicks(){for(let index=0;index<this.cardParent._children.length;index++){this.cardParent._children[index].DigitalCard.cardClicksOff()}}createCard(type){let card=Laya.Pool.getItemByCreateFun("speakBox",this.digitalCard.create,this.digitalCard);return this.cardParent.addChild(card),card.DigitalCard.number.value="change"===type?this.changeAnumber():this.indicateNum.value,card}changeAnumber(){let arr=[];for(let i=0;i<this.indicateNum.value.length;i++)arr.push(this.indicateNum.value[i]);let numString,random=Math.floor(Math.random()*(arr.length-1)),originalNum=arr[random],randomNum=Math.floor(10*Math.random()).toString();for(;originalNum===randomNum;)randomNum=Math.floor(10*Math.random()).toString();arr[random]=randomNum;for(let j=0;j<arr.length;j++)0===j?numString=arr[j]:numString+=arr[j];return numString}createGameOver(){let gameOVer=Laya.Pool.getItemByCreateFun("gameOVer",this.gameOVer.create,this.gameOVer);this.self.addChild(gameOVer)}createRanking(){let ranking=Laya.Pool.getItemByCreateFun("ranking",this.ranking.create,this.ranking);this.self.addChild(ranking),Laya.Browser.onMiniGame&&this.bannerAd.hide()}adaptiveOther(self){self.width=750,self.pivotX=self.width/2,self.pivotY=self.height/2,self.pos(375,Laya.stage.height/2)}childAdaptive(child,parent,locationY){child.y=locationY-(Laya.stage.height/2-parent.height/2)}wxPostInit(){Laya.Browser.onMiniGame&&Laya.loader.load(["res/atlas/rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/rank.atlas"),Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"init"})}))}wxPostData(){if(Laya.Browser.onMiniGame){let args={type:"scores",data:{scores:this.levelsNum.value}};Laya.Browser.window.wx.getOpenDataContext().postMessage(args),console.log("上传了")}else console.log("没有上传")}wxShare(){if(Laya.Browser.onMiniGame){Laya.Browser.window.wx.shareAppMessage({title:"你的数字敏感度及格了吗？",imageUrlId:"CRYATpcgSFGkeB4Hs75jOQ",imageUrl:"https://mmocgame.qpic.cn/wechatgame/9zdKibmXJ3RsmFpXn6UAV4ScT8ulA4wzqUUNicKWDIaODZbuv38lkBBOBQv8XbxOI0/0"}),console.log("主动进行了转发")}else console.log("仅支持微信客户端")}onUpdate(){if(this.timerSwitch&&(this.timer++,this.timer%60==0&&this.timer>0)){let subNum,timeNum=this.timeNum.value;if(3===timeNum.length?subNum=timeNum.substring(0,2):2===timeNum.length&&(subNum=timeNum.substring(0,1)),"0"===subNum)return this.timerSwitch=!1,void this.clearAllCard_Over();this.timeNum.value=(Number(subNum)-1).toString()+"s"}}onDisable(){}}!function(Clicks){Clicks.clicksOn=function(effect,target,caller,down,move,up,out){let btnEffect;switch(effect){case"largen":default:btnEffect=new Btn_LargenEffect}target.on(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.on(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.on(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.on(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)},Clicks.clicksOff=function(effect,target,caller,down,move,up,out){let btnEffect;switch(effect){case"largen":btnEffect=new Btn_LargenEffect}target.off(Laya.Event.MOUSE_DOWN,caller,null===down?btnEffect.down:down),target.off(Laya.Event.MOUSE_MOVE,caller,null===move?btnEffect.move:move),target.off(Laya.Event.MOUSE_UP,caller,null===up?btnEffect.up:up),target.off(Laya.Event.MOUSE_OUT,caller,null===out?btnEffect.out:out)}}(Clicks||(Clicks={}));class Btn_LargenEffect{constructor(){}down(event){event.currentTarget.scale(1.1,1.1),Laya.SoundManager.playSound("音效/按钮点击.mp3",1,Laya.Handler.create(this,function(){}))}up(event){event.currentTarget.scale(1,1)}move(event){event.currentTarget.scale(1.1,1.1)}out(event){event.currentTarget.scale(1,1)}}class DigitalCard extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.DigitalCard=this,this.gameControl=this.self.scene.Gamecontrol,this.cardParent=this.gameControl.cardParent,this.indicateCard=this.gameControl.indicateCard,this.levels=this.gameControl.levels;let scale=1-.04*(this.levels-1);this.number.scale(scale,scale),this.board.skin="UI/数字底板.png",this.sign=!1}cardVanish(type){"right"===type?(Animation.upDwon_Shake(this.indicateCard,50,10,null),Animation.upDwon_Shake(this.self,50,10,func=>this.gameControl.clearAllCard_Next())):"error"===type&&(Animation.leftRight_Shake(this.indicateCard,50,10,null),Animation.leftRight_Shake(this.self,50,10,func=>this.gameControl.clearAllCard_Over()))}cardClicksOn(){Clicks.clicksOn("largen",this.self,this,this.down,null,this.up,null)}cardClicksOff(){Clicks.clicksOff("largen",this.self,this,this.down,null,this.up,null)}down(event){event.currentTarget.scale(1.1,1.1),this.self.zOrder=100;let indicateNum=this.gameControl.indicateNum;this.number.value===indicateNum.value?(PalyAudio.clickRight(1),this.board.skin="UI/正确底板.png"):(PalyAudio.clickError(1),this.board.skin="UI/错误底板.png")}up(event){this.gameControl.clearAllClicks(),this.gameControl.timerSwitch=!1,event.currentTarget.scale(1,1);let indicateNum=this.gameControl.indicateNum;this.number.value===indicateNum.value?this.cardVanish("right"):this.cardVanish("error")}onDisable(){}}class GameOver extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.levelsNode=this.gameControl.levelsNode,this.indicateCard=this.gameControl.indicateCard,this.timeCard=this.gameControl.timeCard,this.line=this.gameControl.line,this.logoSwitch=!1,this.logoChange="appear",this.gameControl.adaptiveOther(this.self),this.appaer(),this.gameControl.wxPostData(),PalyAudio.gameOver(1)}appaer(){PalyAudio.aAingleCard(3),Animation.go_up(this.logo,1800,1===Math.floor(2*Math.random())?45:-45,644,800,0,null),Animation.go_up(this.btn_again,1800,1===Math.floor(2*Math.random())?45:-45,790,800,150,null),Animation.go_up(this.btn_return,1800,1===Math.floor(2*Math.random())?45:-45,790,800,300,func=>{this.levelsCardAni()})}levelsCardAni(){let targetX=Laya.stage.width/2,targetY=this.logo.y+(this.self.y-this.self.height/2)-150;Animation.move_changeRotate(this.levelsNode,targetX,targetY,.5,45,200,func=>this.logoSwitch=!0),Animation.cardRotateX_TowFace(this.levelsNode,["levelsNum"],func=>PalyAudio.cardRotate(2),100,0,null),Animation.fade_out(this.indicateCard,1,0,400,60,func=>this.clicksOnBtn()),Animation.fade_out(this.timeCard,1,0,400,30,null),Animation.fade_out(this.line,1,0,400,0,null)}nodeDisplay(type){let targetY=this.indicateCard.y;Animation.move_changeRotate(this.levelsNode,108,targetY,.5,-45,250,null),Animation.cardRotateX_TowFace(this.levelsNode,["levelsNum"],func=>PalyAudio.cardRotate(2),100,0,null),Animation.fade_out(this.indicateCard,0,1,500,100,null),Animation.fade_out(this.timeCard,0,1,500,200,null),Animation.fade_out(this.line,0,1,500,500,func=>this.nodeDisplayFunc(type))}nodeDisplayFunc(type){"again"===type?this.gameControl.replacementCard("reStart"):"return"===type&&(this.gameControl.createStartGame(),this.gameControl.otherVanish())}vanish(type){Animation.drop(this.btn_again,1800,1===Math.floor(2*Math.random())?30:-30,800,0,null),Animation.drop(this.btn_return,1800,1===Math.floor(2*Math.random())?30:-30,800,150,null),Animation.drop(this.logo,1800,1===Math.floor(2*Math.random())?30:-30,800,300,func=>this.vanishFunc(type))}vanishFunc(type){Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.self.removeSelf(),this.nodeDisplay(type)}clicksOnBtn(){Clicks.clicksOn("largen",this.btn_again,this,null,null,this.up,null),Clicks.clicksOn("largen",this.btn_return,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.btn_again,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_return,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),this.clicksOffBtn(),"btn_again"===event.currentTarget.name?this.vanish("again"):"btn_return"===event.currentTarget.name&&this.vanish("return")}onUpdate(){this.logoSwitch&&("appear"===this.logoChange?(this.logo.alpha-=.01,this.logo.alpha<.3&&(this.logoChange="vanish")):"vanish"===this.logoChange&&(this.logo.alpha+=.01,this.logo.alpha>=1&&(this.logoChange="appear")))}onDisable(){}}class Ranking extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.background.width=Laya.stage.width,this.background.height=Laya.stage.height,this.gameControl.childAdaptive(this.background,this.self,this.background.y),this.gameControl.adaptiveOther(this.self),this.appear()}onAwake(){if(console.log("排行榜"),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"ranking"})}}appear(){Animation.fade_out(this.background,0,.3,300,0,null),Animation.fade_out(this.baseboard,0,1,300,0,func=>this.clicksOnBtn())}vanish(){Animation.fade_out(this.background,.3,0,300,0,func=>this.vanishFunc()),Animation.fade_out(this.baseboard,1,0,300,0,null)}vanishFunc(){if(this.self.removeSelf(),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"close"})}Laya.Browser.onMiniGame&&this.gameControl.bannerAd.show().then(()=>console.log("banner 广告显示"))}clicksOnBtn(){Clicks.clicksOn("largen",this.background,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.background,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),this.vanish(),console.log("我点击了背景！")}onDisable(){}}class StartGame extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.levelsNode=this.gameControl.levelsNode,this.indicateCard=this.gameControl.indicateCard,this.timeCard=this.gameControl.timeCard,this.line=this.gameControl.line,this.gameControl.startNode=this.self,this.startSwitch=!1,this.startChange="appear",this.watchAds=!1,this.gameControl.adaptiveOther(this.self),this.gameControl.childAdaptive(this.anti_addiction,this.self,9*Laya.stage.height/10),this.videoAd=this.gameControl.videoAd,this.gameControl.startFirstAudio>0&&PalyAudio.aAingleCard(5),this.gameControl.startFirstAudio+=1,this.appaer()}appaer(){Animation.go_up(this.logo,1800,1===Math.floor(2*Math.random())?45:-45,416,800,0,func=>{}),Animation.go_up(this.btn_start,1800,1===Math.floor(2*Math.random())?45:-45,565,800,150,null),Animation.go_up(this.btn_adv,1800,1===Math.floor(2*Math.random())?45:-45,667,800,300,null),Animation.go_up(this.btn_ranking,1800,1===Math.floor(2*Math.random())?45:-45,877,800,450,null),Animation.go_up(this.btn_share,1800,1===Math.floor(2*Math.random())?45:-45,877,800,600,func=>this.appaerFunc()),Animation.fade_out(this.anti_addiction,0,1,1e3,0,null)}appaerFunc(){this.startSwitch=!0,this.clicksOnBtn(),Laya.Browser.onMiniGame&&this.gameControl.bannerAd.show().then(()=>console.log("banner 广告显示"))}vanish(type){let y=1800;Animation.drop(this.logo,y,1===Math.floor(2*Math.random())?30:-30,600,0,null),Animation.drop(this.btn_start,y,1===Math.floor(2*Math.random())?30:-30,600,50,null),Animation.drop(this.btn_adv,y,1===Math.floor(2*Math.random())?30:-30,600,100,null),Animation.drop(this.btn_ranking,y,1===Math.floor(2*Math.random())?30:-30,600,150,null),Animation.drop(this.btn_share,y,1===Math.floor(2*Math.random())?30:-30,600,250,func=>this.vanishFunc(type)),Animation.fade_out(this.anti_addiction,1,0,300,0,null)}vanishFunc(type){this.self.removeSelf(),this.gameControl.otherAppear(),this.gameControl.replacementCard(type)}clicksOnBtn(){Clicks.clicksOn("largen",this.btn_start,this,null,null,this.up,null),Clicks.clicksOn("largen",this.btn_adv,this,null,null,this.up,null),Clicks.clicksOn("largen",this.btn_ranking,this,null,null,this.up,null),Clicks.clicksOn("largen",this.btn_share,this,null,null,this.up,null)}clicksOffBtn(){Clicks.clicksOff("largen",this.btn_start,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_adv,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_ranking,this,null,null,this.up,null),Clicks.clicksOff("largen",this.btn_share,this,null,null,this.up,null)}up(event){event.currentTarget.scale(1,1),"btn_start"===event.currentTarget.name?(Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.vanish("start"),this.clicksOffBtn()):"btn_adv"===event.currentTarget.name?(Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.videoAd.show().catch(()=>{this.videoAd.load().then(()=>this.videoAd.show()).catch(err=>{console.log("激励视频 广告显示失败")})})):"btn_ranking"===event.currentTarget.name?this.gameControl.createRanking():"btn_share"===event.currentTarget.name&&this.gameControl.wxShare()}onUpdate(){this.startSwitch&&("appear"===this.startChange?(this.btn_start.scaleX+=.003,this.btn_start.scaleY+=.003,this.btn_adv.scaleX-=.003,this.btn_adv.scaleY-=.003,this.btn_start.scaleX>1.1&&(this.startChange="vanish")):"vanish"===this.startChange&&(this.btn_start.scaleX-=.003,this.btn_start.scaleY-=.003,this.btn_adv.scaleX+=.003,this.btn_adv.scaleY+=.003,this.btn_start.scaleX<1&&(this.startChange="appear")))}onDisable(){}}class GameConfig{constructor(){}static init(){var reg=Laya.ClassUtils.regClass;reg("Script/GameControl.ts",GameControl),reg("Script/DigitalCard.ts",DigitalCard),reg("Script/GameOver.ts",GameOver),reg("Script/Ranking.ts",Ranking),reg("Script/StartGame.ts",StartGame)}}GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="Scene/MainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig.init();new class{constructor(){window.Laya3D?Laya3D.init(GameConfig.width,GameConfig.height):Laya.init(GameConfig.width,GameConfig.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=GameConfig.scaleMode,Laya.stage.screenMode=GameConfig.screenMode,Laya.stage.alignV=GameConfig.alignV,Laya.stage.alignH=GameConfig.alignH,Laya.URL.exportSceneToJson=GameConfig.exportSceneToJson,(GameConfig.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),GameConfig.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){GameConfig.startScene&&Laya.Scene.open(GameConfig.startScene)}}}();