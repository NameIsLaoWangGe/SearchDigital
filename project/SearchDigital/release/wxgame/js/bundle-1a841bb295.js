!function(){"use strict";class IndicateCard extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.gameControl=this.self.scene.Gamecontrol,this.self.IndicateCard=this}indicateNodeAin(){Laya.Tween.to(this.self,{scaleY:0},120,null,Laya.Handler.create(this,function(){this.indicateNumReset(),Laya.Tween.to(this.self,{scaleY:1},120,null,Laya.Handler.create(this,function(){this.gameControl.cardCollection()}),0)}),0)}indicateNumReset(){let num1=Math.floor(9*Math.random())+1,levels=this.gameControl.levels,overlen=levels-1,num=num1.toString();for(let i=0;i<overlen;i++)num+=Math.floor(10*Math.random()).toString();let scale=1-.04*(levels-2);this.indicateNum.scale(scale,scale),this.indicateNum.value=num,this.gameControl.changeAnumber()}errorAni(){Laya.Tween.to(this.self,{x:this.self.x-10},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{x:this.self.x+20},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{x:this.self.x-10},50,null,Laya.Handler.create(this,function(){}))}))}))}rightAni(){Laya.Tween.to(this.self,{y:this.self.y+10},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{y:this.self.y-20},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{y:this.self.y+10},50,null,Laya.Handler.create(this,function(){}))}))}))}onDisable(){}}class GameControl extends Laya.Script{constructor(){super()}onEnable(){this.initGameScene(),this.adaptiveRule(),this.createStartGame()}initGameScene(){this.self=this.owner,this.self.Gamecontrol=this,this.levels=0,this.levelsNum.value=this.levels.toString(),this.timer=0,this.timeNum.value="30s",this.timerSwitch=!1,this.videoAdOnClose=!1,this.videoAdLode(),this.bannerAdLode(),this.wxPostInit()}videoAdLode(){Laya.Browser.onMiniGame&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-6de18c6de7b6d9ab"}),this.videoAd.onLoad(()=>{console.log("激励视频 广告加载成功")}),this.videoAd.onError(err=>{console.log(err)}),this.videoAd.onClose(res=>{res&&res.isEnded||void 0===res?(this.startNode.GameOVer.startVanish("adv"),Laya.Browser.onMiniGame&&this.bannerAd.hide()):(Laya.Browser.onMiniGame&&this.bannerAd.show().then(()=>console.log("banner 广告显示")),console.log("视频没有看望不会开始游戏"))}))}bannerAdLode(){Laya.Browser.onMiniGame&&(this.bannerAd=wx.createBannerAd({adUnitId:"adunit-5329937f4349b0ea",adIntervals:30,style:{left:0,top:0,width:750}}),this.bannerAd.onLoad(()=>{console.log("banner 广告加载成功")}),this.bannerAd.onError(err=>{console.log(err)}),this.bannerAd.show())}adaptiveRule(){let stageHeight=Laya.stage.height;this.self.height=stageHeight,this.background.height=stageHeight,this.background.x=0,this.background.y=0,this.line.y=.202*stageHeight,this.line.alpha=0;let location=.132*stageHeight;this.levelsNode.y=location,this.levelsNode.alpha=0,this.indicateCard.y=location,this.indicateCard.alpha=0,this.timeCard.y=location,this.timeCard.alpha=0,this.cardParent.y=.22*stageHeight,this.cardAndParentAdaptive()}replacementCard(type){"start"===type?(this.levels=1,this.timeNum.value="30s"):"adv"===type?(this.levels=1,this.timeNum.value="40s"):"reStart"===type?(this.levels=1,this.timeNum.value="30s"):"nextLevel"===type&&this.levels++,this.timer=-50,Laya.timer.once(200,this,function(){this.levelsNode.LevelsNode.levelsNodeAni("nextLevel",120)})}createStartGame(){let startGame=Laya.Pool.getItemByCreateFun("startGame",this.startGame.create,this.startGame);this.self.addChild(startGame)}otherVanish(){Laya.Tween.to(this.levelsNode,{alpha:0},200,null,Laya.Handler.create(this,function(){}),0),Laya.Tween.to(this.indicateCard,{alpha:0},200,null,Laya.Handler.create(this,function(){}),150),Laya.Tween.to(this.timeCard,{alpha:0},200,null,Laya.Handler.create(this,function(){}),300),Laya.Tween.to(this.line,{alpha:0},200,null,Laya.Handler.create(this,function(){}),450)}otherAppear(){Laya.Tween.to(this.levelsNode,{alpha:1},200,null,Laya.Handler.create(this,function(){}),0),Laya.Tween.to(this.indicateCard,{alpha:1},200,null,Laya.Handler.create(this,function(){}),150),Laya.Tween.to(this.timeCard,{alpha:1},200,null,Laya.Handler.create(this,function(){}),300),Laya.Tween.to(this.line,{alpha:1},200,null,Laya.Handler.create(this,function(){}),450)}cardAndParentAdaptive(){this.cardSpacingY=5;let cardSpace=(this.self.height-this.cardParent.y-.05*this.self.height)/7;this.cardHeight=cardSpace-this.cardSpacingY}cardCollection(){let startX1=this.cardParent.width/4,startX2=3*this.cardParent.width/4,noChengeJ=Math.floor(14*Math.random()),delayed=10;for(let j=13;j>=0;j--){let card,tagetY;delayed+=50,(card=j===noChengeJ?this.createCard("nochange"):this.createCard("change")).y=1500,card.zOrder=Math.floor(30*Math.random()),card.height=this.cardHeight,card.DigitalCard.board.height=this.cardHeight,card.DigitalCard.number.y=this.cardHeight/2,j%2==0?(card.x=startX1,tagetY=j/2*(card.height+this.cardSpacingY)+80):(card.x=startX2,tagetY=(j-1)/2*(card.height+this.cardSpacingY)+80),card.rotation=1===Math.floor(2*Math.random())?30:-30;let time=500;Laya.timer.once(delayed,this,function(){Laya.Tween.to(card,{y:tagetY,rotation:0},time,Laya.Ease.circOut,Laya.Handler.create(this,function(){if(13===j){this.timerSwitch=!0;for(let index=0;index<this.cardParent._children.length;index++){this.cardParent._children[index].DigitalCard.cardClicksOn()}}}))})}}clearAllCard(type){this.clearAllClicks();let len=this.cardParent._children.length;this.timerSwitch=!1;for(let i=0;i<len;i++){let card=this.cardParent._children[i];card.DigitalCard.number.value===this.indicateNum.value?"gameOver"===type&&this.cardRotating(card):Laya.timer.once(50*i,this,function(){let rotate=1===Math.floor(2*Math.random())?30:-30;Laya.Tween.to(card,{y:1800,alpha:0,rotation:rotate},800,null,Laya.Handler.create(this,function(){"nextLevel"===type&&i===len-1&&(this.cardParent.removeChildren(0,len-1),this.replacementCard("nextLevel"))}))})}}cardRotating(card){let len=this.cardParent._children.length;Laya.timer.once(50*len+500,this,function(){Laya.Tween.to(card,{scaleY:0},120,null,Laya.Handler.create(this,function(){card.DigitalCard.number.alpha=0,Laya.Tween.to(card,{scaleY:1},120,null,Laya.Handler.create(this,function(){Laya.Tween.to(card,{scaleY:0},120,null,Laya.Handler.create(this,function(){card.DigitalCard.number.alpha=1,Laya.Tween.to(card,{scaleY:1},120,null,Laya.Handler.create(this,function(){Laya.Tween.to(card,{y:1800,alpha:0,rotation:1===Math.floor(2*Math.random())?30:-30},1400,null,Laya.Handler.create(this,function(){this.cardParent.removeChildren(0,len-1),this.createGameOver()}),100)}))}))}))}))})}clearAllClicks(){for(let index=0;index<this.cardParent._children.length;index++){this.cardParent._children[index].DigitalCard.cardClicksOff()}}createCard(type){let card=Laya.Pool.getItemByCreateFun("speakBox",this.digitalCard.create,this.digitalCard);return this.cardParent.addChild(card),card.DigitalCard.number.value="change"===type?this.changeAnumber():this.indicateNum.value,card}changeAnumber(){let arr=[];for(let i=0;i<this.indicateNum.value.length;i++)arr.push(this.indicateNum.value[i]);let numString,random=Math.floor(Math.random()*(arr.length-1)),originalNum=arr[random],randomNum=Math.floor(10*Math.random()).toString();for(;originalNum===randomNum;)randomNum=Math.floor(10*Math.random()).toString();arr[random]=randomNum;for(let j=0;j<arr.length;j++)0===j?numString=arr[j]:numString+=arr[j];return numString}createGameOver(){let gameOVer=Laya.Pool.getItemByCreateFun("gameOVer",this.gameOVer.create,this.gameOVer);this.self.addChild(gameOVer)}createRanking(){let ranking=Laya.Pool.getItemByCreateFun("ranking",this.ranking.create,this.ranking);this.self.addChild(ranking),Laya.Browser.onMiniGame&&this.bannerAd.hide()}adaptiveOther(self){self.width=750,self.pivotX=self.width/2,self.pivotY=self.height/2,self.pos(375,Laya.stage.height/2)}childAdaptive(child,parent,locationY){child.y=locationY-(Laya.stage.height/2-parent.height/2)}wxPostInit(){Laya.Browser.onMiniGame&&Laya.loader.load(["res/atlas/rank.atlas"],Laya.Handler.create(null,function(){Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/rank.atlas"),Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"init"})}))}wxPostData(){if(Laya.Browser.onMiniGame){let args={type:"scores",data:{scores:this.levelsNum.value}};Laya.Browser.window.wx.getOpenDataContext().postMessage(args),console.log("上传了")}else console.log("没有上传")}wxShare(){if(Laya.Browser.onMiniGame){Laya.Browser.window.wx.shareAppMessage({title:"数字找茬",imageUrlId:"CRYATpcgSFGkeB4Hs75jOQ",imageUrl:"https://mmocgame.qpic.cn/wechatgame/9zdKibmXJ3RsmFpXn6UAV4ScT8ulA4wzqUUNicKWDIaODZbuv38lkBBOBQv8XbxOI0/0"}),console.log("主动进行了转发")}else console.log("仅支持微信客户端")}onUpdate(){if(this.timerSwitch&&(this.timer++,this.timer%60==0&&this.timer>0)){let subNum,timeNum=this.timeNum.value;if(3===timeNum.length?subNum=timeNum.substring(0,2):2===timeNum.length&&(subNum=timeNum.substring(0,1)),"0"===subNum)return this.timerSwitch=!1,void this.clearAllCard("gameOver");this.timeNum.value=(Number(subNum)-1).toString()+"s"}}onDisable(){}}class LevelsNode extends Laya.Script{onEnable(){this.self=this.owner,this.gameControl=this.self.scene.Gamecontrol,this.cardParent=this.gameControl.cardParent,this.indicateCard=this.gameControl.indicateCard,this.self.LevelsNode=this}levelsNodeAni(type,time){Laya.Tween.to(this.self,{scaleX:0},time,null,Laya.Handler.create(this,function(){this.levelsNum.alpha=0,Laya.Tween.to(this.self,{scaleX:1},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{scaleX:0},time,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{scaleX:1},time-50,null,Laya.Handler.create(this,function(){this.levelsNum.alpha=1;let levels=this.gameControl.levels;this.levelsNum.value=levels.toString(),"nextLevel"===type&&this.indicateCard.IndicateCard.indicateNodeAin()}),0)}),0)}),0)}),0)}onDisable(){}}class DigitalCard extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.DigitalCard=this,this.gameControl=this.self.scene.Gamecontrol,this.cardParent=this.gameControl.cardParent,this.indicateCard=this.gameControl.indicateCard,this.levels=this.gameControl.levels;let scale=1-.04*(this.levels-1);this.number.scale(scale,scale)}cardClicksOn(){this.self.on(Laya.Event.MOUSE_DOWN,this,this.down),this.self.on(Laya.Event.MOUSE_MOVE,this,this.move),this.self.on(Laya.Event.MOUSE_UP,this,this.up),this.self.on(Laya.Event.MOUSE_OUT,this,this.out)}cardClicksOff(){this.self.off(Laya.Event.MOUSE_DOWN,this,this.down),this.self.off(Laya.Event.MOUSE_MOVE,this,this.move),this.self.off(Laya.Event.MOUSE_UP,this,this.up),this.self.off(Laya.Event.MOUSE_OUT,this,this.out)}down(event){event.currentTarget.scale(1.1,1.1)}cardVanish(type){this.gameControl.clearAllClicks(),"right"===type?(this.indicateCard.IndicateCard.rightAni(),Laya.Tween.to(this.self,{y:this.self.y+10},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{y:this.self.y-20},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{y:this.self.y+10},50,null,Laya.Handler.create(this,function(){this.gameControl.clearAllCard("nextLevel"),this.self.removeSelf()}))}))}))):"error"===type&&(this.indicateCard.IndicateCard.errorAni(),Laya.Tween.to(this.self,{x:this.self.x-10},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{x:this.self.x+20},50,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.self,{x:this.self.x-10},50,null,Laya.Handler.create(this,function(){this.gameControl.clearAllCard("gameOver")}))}))})))}move(event){event.currentTarget.scale(1,1)}up(event){this.gameControl.timerSwitch=!1,this.cardClicksOff(),event.currentTarget.scale(1,1);let indicateNum=this.gameControl.indicateNum;this.number.value===indicateNum.value?this.cardVanish("right"):this.cardVanish("error")}out(event){event.currentTarget.scale(1,1)}onDisable(){}}class GameOver extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.levelsNode=this.gameControl.levelsNode,this.indicateCard=this.gameControl.indicateCard,this.timeCard=this.gameControl.timeCard,this.line=this.gameControl.line,this.logoSwitch=!1,this.logoChange="appear",this.gameControl.adaptiveOther(this.self),this.appaer(),this.gameControl.wxPostData()}appaer(){this.logo.y=1800,this.logo.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_again.y=1800,this.btn_again.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_return.y=1800,this.btn_return.rotation=1===Math.floor(2*Math.random())?45:-45,this.commonAppear(this.logo,0,644),this.commonAppear(this.btn_again,1,790),this.commonAppear(this.btn_return,2,790)}commonAppear(node,number,targetY){Laya.Tween.to(node,{y:targetY,rotation:0},500,null,Laya.Handler.create(this,function(){0===number&&this.levelsGameOver()}),150*number)}levelsGameOver(){let targetX=Laya.stage.width/2,targetY=this.logo.y+(this.self.y-this.self.height/2)-150;Laya.Tween.to(this.levelsNode,{x:.5*targetX,y:.5*targetY,rotation:45},200,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.levelsNode,{x:targetX,y:targetY,rotation:0},200,null,Laya.Handler.create(this,function(){this.logoSwitch=!0}),0)}),30),this.levelsNode.LevelsNode.levelsNodeAni("common",100),Laya.Tween.to(this.indicateCard,{alpha:0},400,null,Laya.Handler.create(this,function(){this.clicksOnBtn()}),60),Laya.Tween.to(this.timeCard,{alpha:0},400,null,Laya.Handler.create(this,function(){}),30),Laya.Tween.to(this.line,{alpha:0},200,null,Laya.Handler.create(this,function(){}),0)}homing(type){let targetY=this.indicateCard.y;Laya.Tween.to(this.levelsNode,{x:this.levelsNode.x-108-20,y:this.levelsNode.y-targetY,rotation:-45},250,null,Laya.Handler.create(this,function(){Laya.Tween.to(this.levelsNode,{x:108,y:targetY,rotation:0},250,null,Laya.Handler.create(this,function(){}),0)}),0),this.levelsNode.LevelsNode.levelsNodeAni("common",100),Laya.Tween.to(this.indicateCard,{alpha:1},500,null,Laya.Handler.create(this,function(){}),100),Laya.Tween.to(this.timeCard,{alpha:1},500,null,Laya.Handler.create(this,function(){}),200),Laya.Tween.to(this.line,{alpha:1},250,null,Laya.Handler.create(this,function(){"again"===type?this.gameControl.replacementCard("reStart"):"return"===type&&(this.gameControl.createStartGame(),this.gameControl.otherVanish())}),500)}vanish(type){let Rrotation=1===Math.floor(2*Math.random())?30:-30;this.commonVanish(this.btn_again,0,1===Math.floor(2*Math.random())?30:-30),this.commonVanish(this.btn_return,1,1===Math.floor(2*Math.random())?30:-30);Laya.Tween.to(this.logo,{y:1800,rotation:Rrotation},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.self.removeSelf(),this.homing(type)}),300)}commonVanish(node,number,rotation){Laya.Tween.to(node,{y:1800,rotation:rotation},800,Laya.Ease.expoIn,Laya.Handler.create(this,function(){}),0)}clicksOnBtn(){this.btn_again.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_again.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_again.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_again.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_return.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_return.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_return.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_return.on(Laya.Event.MOUSE_OUT,this,this.out)}clicksOffBtn(){this.btn_again.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_again.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_again.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_again.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_return.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_return.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_return.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_return.off(Laya.Event.MOUSE_OUT,this,this.out)}down(event){event.currentTarget.scale(1.1,1.1)}move(event){event.currentTarget.scale(1,1)}up(event){event.currentTarget.scale(1,1),this.clicksOffBtn(),"btn_again"===event.currentTarget.name?this.vanish("again"):"btn_return"===event.currentTarget.name&&this.vanish("return")}out(event){event.currentTarget.scale(1,1)}onUpdate(){this.logoSwitch&&("appear"===this.logoChange?(this.logo.alpha-=.01,this.logo.alpha<.3&&(this.logoChange="vanish")):"vanish"===this.logoChange&&(this.logo.alpha+=.01,this.logo.alpha>=1&&(this.logoChange="appear")))}onDisable(){}}class Ranking extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.background.width=Laya.stage.width,this.background.height=Laya.stage.height,this.gameControl.childAdaptive(this.background,this.self,this.background.y),this.gameControl.adaptiveOther(this.self),this.appear()}onAwake(){if(console.log("排行榜"),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"ranking"})}}appear(){this.background.alpha=.3,this.baseboard.alpha=0;Laya.Tween.to(this.background,{alpha:.3},300,null,Laya.Handler.create(this,function(){}),0),Laya.Tween.to(this.baseboard,{alpha:1},300,null,Laya.Handler.create(this,function(){this.clicksOnBtn()}),0)}vanish(){Laya.Tween.to(this.background,{alpha:0},300,null,Laya.Handler.create(this,function(){if(this.self.removeSelf(),Laya.Browser.onMiniGame){Laya.Browser.window.wx.getOpenDataContext().postMessage({action:"close"})}Laya.Browser.onMiniGame&&this.gameControl.bannerAd.show().then(()=>console.log("banner 广告显示"))}),0),Laya.Tween.to(this.baseboard,{alpha:0},300,null,Laya.Handler.create(this,function(){}),0)}clicksOnBtn(){this.background.on(Laya.Event.MOUSE_DOWN,this,this.down),this.background.on(Laya.Event.MOUSE_MOVE,this,this.move),this.background.on(Laya.Event.MOUSE_UP,this,this.up),this.background.on(Laya.Event.MOUSE_OUT,this,this.out)}clicksOffBtn(){this.background.off(Laya.Event.MOUSE_DOWN,this,this.down),this.background.off(Laya.Event.MOUSE_MOVE,this,this.move),this.background.off(Laya.Event.MOUSE_UP,this,this.up),this.background.off(Laya.Event.MOUSE_OUT,this,this.out)}down(event){event.currentTarget.scale(1.1,1.1)}move(event){event.currentTarget.scale(1,1)}up(event){event.currentTarget.scale(1,1),this.vanish(),console.log("我点击了背景！")}out(event){event.currentTarget.scale(1,1)}onDisable(){}}class StartGame extends Laya.Script{constructor(){super()}onEnable(){this.self=this.owner,this.self.GameOVer=this,this.gameControl=this.self.scene.Gamecontrol,this.levelsNode=this.gameControl.levelsNode,this.indicateCard=this.gameControl.indicateCard,this.timeCard=this.gameControl.timeCard,this.line=this.gameControl.line,this.gameControl.startNode=this.self,this.startSwitch=!1,this.startChange="appear",this.watchAds=!1,this.gameControl.adaptiveOther(this.self),this.videoAd=this.gameControl.videoAd,this.appaer()}appaer(){this.logo.y=1800,this.logo.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_start.y=1800,this.btn_start.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_adv.y=1800,this.btn_adv.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_ranking.y=1800,this.btn_ranking.rotation=1===Math.floor(2*Math.random())?45:-45,this.btn_share.y=1800,this.btn_share.rotation=1===Math.floor(2*Math.random())?45:-45,this.gameControl.childAdaptive(this.anti_addiction,this.self,9*Laya.stage.height/10),this.anti_addiction.alpha=0,this.commonAppear(this.logo,0,416),this.commonAppear(this.btn_start,1,565),this.commonAppear(this.btn_adv,2,667),this.commonAppear(this.btn_ranking,3,877),this.commonAppear(this.btn_share,4,877),Laya.Tween.to(this.anti_addiction,{alpha:1},1e3,null,Laya.Handler.create(this,function(){}))}commonAppear(node,number,targetY){Laya.Tween.to(node,{y:targetY,rotation:0},600,null,Laya.Handler.create(this,function(){4===number&&(this.startSwitch=!0,this.clicksOnBtn(),Laya.Browser.onMiniGame&&this.gameControl.bannerAd.show().then(()=>console.log("banner 广告显示")))}),80*number)}startVanish(type){Laya.Tween.to(this.anti_addiction,{alpha:0},300,null,Laya.Handler.create(this,function(){})),this.commonVanish(this.logo,0,1===Math.floor(2*Math.random())?30:-30),this.commonVanish(this.btn_start,1,1===Math.floor(2*Math.random())?30:-30),this.commonVanish(this.btn_adv,2,1===Math.floor(2*Math.random())?30:-30),this.commonVanish(this.btn_ranking,3,1===Math.floor(2*Math.random())?30:-30);Laya.Tween.to(this.btn_share,{y:1800,rotation:1===Math.floor(2*Math.random())?30:-30},600,Laya.Ease.expoIn,Laya.Handler.create(this,function(){this.self.removeSelf(),this.gameControl.otherAppear(),this.gameControl.replacementCard(type)}),600)}commonVanish(node,number,rotation){Laya.Tween.to(node,{y:1800,rotation:rotation},600,Laya.Ease.expoIn,Laya.Handler.create(this,function(){4===number&&(this.self.removeSelf(),this.gameControl.otherAppear(),this.watchAds?this.gameControl.replacementCard("adv"):this.gameControl.replacementCard("start"))}),150*number)}clicksOnBtn(){this.btn_start.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_start.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_start.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_start.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_adv.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_adv.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_adv.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_adv.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_ranking.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_ranking.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_ranking.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_ranking.on(Laya.Event.MOUSE_OUT,this,this.out),this.btn_share.on(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_share.on(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_share.on(Laya.Event.MOUSE_UP,this,this.up),this.btn_share.on(Laya.Event.MOUSE_OUT,this,this.out)}clicksOffBtn(){this.btn_start.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_start.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_start.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_start.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_adv.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_adv.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_adv.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_adv.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_ranking.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_ranking.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_ranking.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_ranking.off(Laya.Event.MOUSE_OUT,this,this.out),this.btn_share.off(Laya.Event.MOUSE_DOWN,this,this.down),this.btn_share.off(Laya.Event.MOUSE_MOVE,this,this.move),this.btn_share.off(Laya.Event.MOUSE_UP,this,this.up),this.btn_share.off(Laya.Event.MOUSE_OUT,this,this.out)}down(event){event.currentTarget.scale(1.1,1.1)}move(event){event.currentTarget.scale(1,1)}up(event){event.currentTarget.scale(1,1),"btn_start"===event.currentTarget.name?(Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.startVanish("start"),this.clicksOffBtn()):"btn_adv"===event.currentTarget.name?(Laya.Browser.onMiniGame&&this.gameControl.bannerAd.hide(),this.videoAd.show().catch(()=>{this.videoAd.load().then(()=>this.videoAd.show()).catch(err=>{console.log("激励视频 广告显示失败")})})):"btn_ranking"===event.currentTarget.name?this.gameControl.createRanking():"btn_share"===event.currentTarget.name&&this.gameControl.wxShare()}out(event){event.currentTarget.scale(1,1)}onUpdate(){this.startSwitch&&("appear"===this.startChange?(this.btn_start.scaleX+=.003,this.btn_start.scaleY+=.003,this.btn_adv.scaleX-=.003,this.btn_adv.scaleY-=.003,this.btn_start.scaleX>1.1&&(this.startChange="vanish")):"vanish"===this.startChange&&(this.btn_start.scaleX-=.003,this.btn_start.scaleY-=.003,this.btn_adv.scaleX+=.003,this.btn_adv.scaleY+=.003,this.btn_start.scaleX<1&&(this.startChange="appear")))}onDisable(){}}class GameConfig{constructor(){}static init(){var reg=Laya.ClassUtils.regClass;reg("Script/IndicateCard.ts",IndicateCard),reg("Script/GameControl.ts",GameControl),reg("Script/LevelsNode.ts",LevelsNode),reg("Script/DigitalCard.ts",DigitalCard),reg("Script/GameOver.ts",GameOver),reg("Script/Ranking.ts",Ranking),reg("Script/StartGame.ts",StartGame)}}GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="Scene/MainScene.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig.init();new class{constructor(){window.Laya3D?Laya3D.init(GameConfig.width,GameConfig.height):Laya.init(GameConfig.width,GameConfig.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=GameConfig.scaleMode,Laya.stage.screenMode=GameConfig.screenMode,Laya.stage.alignV=GameConfig.alignV,Laya.stage.alignH=GameConfig.alignH,Laya.URL.exportSceneToJson=GameConfig.exportSceneToJson,(GameConfig.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),GameConfig.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),GameConfig.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){GameConfig.startScene&&Laya.Scene.open(GameConfig.startScene)}}}();